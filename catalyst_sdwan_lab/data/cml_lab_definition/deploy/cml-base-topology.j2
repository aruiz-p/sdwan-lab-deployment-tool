annotations:
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: |-
      IP Addressing:
      VPN0: 172.16.0.0/24
      INET: 172.16.1.0/24
      MPLS: 172.16.2.0/24
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: -720.0
    y1: -40.0
    z_index: 0
nodes:
  - boot_disk_size: null
    configuration: |-
{% filter indent(width=6, first=True) %}
{% include 'manager-cloud-init.j2' %}
{% endfilter %}

    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n0
    image_definition: {{ manager_image }}
    label: Manager0{{ manager_num }}
    node_definition: cat-sdwan-manager
    ram: null
{% if patty_used %}
    tags:
      - pat:{{ manager_port }}:443
{% else %}
    tags: []
{% endif %}
    x: -280
    y: -80
    interfaces:
      - id: i0
        label: eth0
        slot: 0
        type: physical
      - id: i1
        label: eth1
        slot: 1
        type: physical
  - boot_disk_size: null
    configuration: |-
{% filter indent(width=6, first=True) %}
{% include 'controller-cloud-init.j2' %}
{% endfilter %}

    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n1
    image_definition: {{ controller_image }}
    label: Controller{{ controller_num }}
    node_definition: cat-sdwan-controller
    ram: null
    tags: []
    x: -40
    y: -80
    interfaces:
      - id: i0
        label: eth0
        slot: 0
        type: physical
      - id: i1
        label: eth1
        slot: 1
        type: physical
      - id: i2
        label: eth2
        slot: 2
        type: physical
      - id: i3
        label: eth3
        slot: 3
        type: physical
  - boot_disk_size: null
    configuration: |-
{% filter indent(width=6, first=True) %}
{% include 'validator-cloud-init.j2' %}
{% endfilter %}

    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n2
    image_definition: {{ validator_image }}
    label: Validator{{ validator_num }}
    node_definition: cat-sdwan-validator
    ram: null
    tags: []
    x: -160
    y: -80
    interfaces:
      - id: i0
        label: eth0
        slot: 0
        type: physical
      - id: i1
        label: ge0/0
        slot: 1
        type: physical
  - boot_disk_size: null
    configuration: ums-0b8e167b-54
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n3
    image_definition: null
    label: SW1
    node_definition: unmanaged_switch
    ram: null
    tags: []
    x: -160
    y: 40
    interfaces:
      - id: i0
        label: port0
        slot: 0
        type: physical
      - id: i1
        label: port1
        slot: 1
        type: physical
      - id: i2
        label: port2
        slot: 2
        type: physical
      - id: i3
        label: port3
        slot: 3
        type: physical
      - id: i4
        label: port4
        slot: 4
        type: physical
      - id: i5
        label: port5
        slot: 5
        type: physical
      - id: i6
        label: port6
        slot: 6
        type: physical
      - id: i7
        label: port7
        slot: 7
        type: physical
      - id: i8
        label: port8
        slot: 8
        type: physical
      - id: i9
        label: port9
        slot: 9
        type: physical
      - id: i10
        label: port10
        slot: 10
        type: physical
      - id: i11
        label: port11
        slot: 11
        type: physical
      - id: i12
        label: port12
        slot: 12
        type: physical
      - id: i13
        label: port13
        slot: 13
        type: physical
      - id: i14
        label: port14
        slot: 14
        type: physical
      - id: i15
        label: port15
        slot: 15
        type: physical
      - id: i16
        label: port16
        slot: 16
        type: physical
      - id: i17
        label: port17
        slot: 17
        type: physical
      - id: i18
        label: port18
        slot: 18
        type: physical
      - id: i19
        label: port19
        slot: 19
        type: physical
      - id: i20
        label: port20
        slot: 20
        type: physical
      - id: i21
        label: port21
        slot: 21
        type: physical
      - id: i22
        label: port22
        slot: 22
        type: physical
      - id: i23
        label: port23
        slot: 23
        type: physical
      - id: i24
        label: port24
        slot: 24
        type: physical
      - id: i25
        label: port25
        slot: 25
        type: physical
      - id: i26
        label: port26
        slot: 26
        type: physical
      - id: i27
        label: port27
        slot: 27
        type: physical
      - id: i28
        label: port28
        slot: 28
        type: physical
      - id: i29
        label: port29
        slot: 29
        type: physical
      - id: i30
        label: port30
        slot: 30
        type: physical
      - id: i31
        label: port31
        slot: 31
        type: physical
  - boot_disk_size: null
    configuration: |-
      hostname Gateway
      !
      ip host {{ validator_fqdn }} 10.1.0.3
      ip domain lookup
      !
      interface Ethernet0/0
       ip address 10.1.0.254 255.255.255.0
       ip nat inside
       no shutdown
      !
      interface Ethernet0/1
       ip address 123.123.123.3 255.255.255.248
       ip nat inside
       no shutdown
      !
      interface Ethernet7/3
       ip address dhcp
       ip nat outside
       no shutdown
      !
      router ospf 1
       network 0.0.0.0 255.255.255.255 area 0
      !
      ip dns server
      ip nat inside source list 1 interface Ethernet7/3 overload
      !
      ip access-list standard 1
       10 permit 10.0.0.0 0.255.255.255
       20 permit 172.16.0.0 0.15.255.255
       30 permit 192.168.0.0 0.0.255.255
      !
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n4
    image_definition: null
    label: Gateway
    node_definition: iol-xe
    ram: null
    tags: []
    x: -160
    y: 160
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: Ethernet0/0
        slot: 0
        type: physical
      - id: i2
        label: Ethernet0/1
        slot: 1
        type: physical
      - id: i3
        label: Ethernet0/2
        slot: 2
        type: physical
      - id: i4
        label: Ethernet0/3
        slot: 3
        type: physical
      - id: i5
        label: Ethernet1/0
        slot: 4
        type: physical
      - id: i6
        label: Ethernet1/1
        slot: 5
        type: physical
      - id: i7
        label: Ethernet1/2
        slot: 6
        type: physical
      - id: i8
        label: Ethernet1/3
        slot: 7
        type: physical
      - id: i9
        label: Ethernet2/0
        slot: 8
        type: physical
      - id: i10
        label: Ethernet2/1
        slot: 9
        type: physical
      - id: i11
        label: Ethernet2/2
        slot: 10
        type: physical
      - id: i12
        label: Ethernet2/3
        slot: 11
        type: physical
      - id: i13
        label: Ethernet3/0
        slot: 12
        type: physical
      - id: i14
        label: Ethernet3/1
        slot: 13
        type: physical
      - id: i15
        label: Ethernet3/2
        slot: 14
        type: physical
      - id: i16
        label: Ethernet3/3
        slot: 15
        type: physical
      - id: i17
        label: Ethernet4/0
        slot: 16
        type: physical
      - id: i18
        label: Ethernet4/1
        slot: 17
        type: physical
      - id: i19
        label: Ethernet4/2
        slot: 18
        type: physical
      - id: i20
        label: Ethernet4/3
        slot: 19
        type: physical
      - id: i21
        label: Ethernet5/0
        slot: 20
        type: physical
      - id: i22
        label: Ethernet5/1
        slot: 21
        type: physical
      - id: i23
        label: Ethernet5/2
        slot: 22
        type: physical
      - id: i24
        label: Ethernet5/3
        slot: 23
        type: physical
      - id: i25
        label: Ethernet6/0
        slot: 24
        type: physical
      - id: i26
        label: Ethernet6/1
        slot: 25
        type: physical
      - id: i27
        label: Ethernet6/2
        slot: 26
        type: physical
      - id: i28
        label: Ethernet6/3
        slot: 27
        type: physical
      - id: i29
        label: Ethernet7/0
        slot: 28
        type: physical
      - id: i30
        label: Ethernet7/1
        slot: 29
        type: physical
      - id: i31
        label: Ethernet7/2
        slot: 30
        type: physical
      - id: i32
        label: Ethernet7/3
        slot: 31
        type: physical
  - boot_disk_size: null
    configuration: {{ bridge }}
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n5
    image_definition: null
    label: External
    node_definition: external_connector
    ram: null
    tags: []
    x: -400
    y: -80
    interfaces:
      - id: i0
        label: port
        slot: 0
        type: physical
  - boot_disk_size: null
    configuration: NAT
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n6
    image_definition: null
    label: Internet
    node_definition: external_connector
    ram: null
    tags: []
    x: -320
    y: 160
    interfaces:
      - id: i0
        label: port
        slot: 0
        type: physical
  - boot_disk_size: null
    configuration: ums-0b8e167b-54
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n7
    image_definition: null
    label: SW2
    node_definition: unmanaged_switch
    ram: null
    tags: []
    x: -160
    y: 280
    interfaces:
      - id: i0
        label: port0
        slot: 0
        type: physical
      - id: i1
        label: port1
        slot: 1
        type: physical
      - id: i2
        label: port2
        slot: 2
        type: physical
      - id: i3
        label: port3
        slot: 3
        type: physical
      - id: i4
        label: port4
        slot: 4
        type: physical
      - id: i5
        label: port5
        slot: 5
        type: physical
      - id: i6
        label: port6
        slot: 6
        type: physical
      - id: i7
        label: port7
        slot: 7
        type: physical
      - id: i8
        label: port8
        slot: 8
        type: physical
      - id: i9
        label: port9
        slot: 9
        type: physical
      - id: i10
        label: port10
        slot: 10
        type: physical
      - id: i11
        label: port11
        slot: 11
        type: physical
      - id: i12
        label: port12
        slot: 12
        type: physical
      - id: i13
        label: port13
        slot: 13
        type: physical
      - id: i14
        label: port14
        slot: 14
        type: physical
      - id: i15
        label: port15
        slot: 15
        type: physical
      - id: i16
        label: port16
        slot: 16
        type: physical
      - id: i17
        label: port17
        slot: 17
        type: physical
      - id: i18
        label: port18
        slot: 18
        type: physical
      - id: i19
        label: port19
        slot: 19
        type: physical
      - id: i20
        label: port20
        slot: 20
        type: physical
      - id: i21
        label: port21
        slot: 21
        type: physical
      - id: i22
        label: port22
        slot: 22
        type: physical
      - id: i23
        label: port23
        slot: 23
        type: physical
      - id: i24
        label: port24
        slot: 24
        type: physical
      - id: i25
        label: port25
        slot: 25
        type: physical
      - id: i26
        label: port26
        slot: 26
        type: physical
      - id: i27
        label: port27
        slot: 27
        type: physical
      - id: i28
        label: port28
        slot: 28
        type: physical
      - id: i29
        label: port29
        slot: 29
        type: physical
      - id: i30
        label: port30
        slot: 30
        type: physical
      - id: i31
        label: port31
        slot: 31
        type: physical
  - boot_disk_size: null
    configuration: |-
      hostname inet
      !
      ip domain lookup
      !
      username sdwan privilege 15 secret 9 $9$dHEaXiQz4fEdeU$zv7pQ8GSyWkJDqmRp11299Rsz.bmVSsmGaVwSo3naYw
      !
      interface Ethernet0/0
       ip address 123.123.123.2 255.255.255.248
      !
      interface Ethernet0/1
       ip address 31.1.1.254 255.255.255.0
      !
      router ospf 1
       network 0.0.0.0 255.255.255.255 area 0
      !
      ip name-server 123.123.123.3
      ip dns server
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n8
    image_definition: null
    label: INET
    node_definition: iol-xe
    ram: null
    tags: []
    x: -320
    y: 360
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: Ethernet0/0
        slot: 0
        type: physical
      - id: i2
        label: Ethernet0/1
        slot: 1
        type: physical
      - id: i3
        label: Ethernet0/2
        slot: 2
        type: physical
      - id: i4
        label: Ethernet0/3
        slot: 3
        type: physical
      - id: i5
        label: Ethernet1/0
        slot: 4
        type: physical
      - id: i6
        label: Ethernet1/1
        slot: 5
        type: physical
      - id: i7
        label: Ethernet1/2
        slot: 6
        type: physical
      - id: i8
        label: Ethernet1/3
        slot: 7
        type: physical
      - id: i9
        label: Ethernet2/0
        slot: 8
        type: physical
      - id: i10
        label: Ethernet2/1
        slot: 9
        type: physical
      - id: i11
        label: Ethernet2/2
        slot: 10
        type: physical
      - id: i12
        label: Ethernet2/3
        slot: 11
        type: physical
      - id: i13
        label: Ethernet3/0
        slot: 12
        type: physical
      - id: i14
        label: Ethernet3/1
        slot: 13
        type: physical
  - boot_disk_size: null
    configuration: |-
      hostname mpls
      !
      ip domain lookup
      !
      username sdwan privilege 15 secret 9 $9$dHEaXiQz4fEdeU$zv7pQ8GSyWkJDqmRp11299Rsz.bmVSsmGaVwSo3naYw
      !
      interface Ethernet0/0
       ip address 123.123.123.1 255.255.255.248
      !
      interface Ethernet0/1
       ip address 172.16.1.254 255.255.255.0
      !
      router ospf 1
       network 0.0.0.0 255.255.255.255 area 0
      !
      ip name-server 123.123.123.3
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n9
    image_definition: null
    label: MPLS
    node_definition: iol-xe
    ram: null
    tags: []
    x: -40
    y: 360
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: Ethernet0/0
        slot: 0
        type: physical
      - id: i2
        label: Ethernet0/1
        slot: 1
        type: physical
      - id: i3
        label: Ethernet0/2
        slot: 2
        type: physical
      - id: i4
        label: Ethernet0/3
        slot: 3
        type: physical
      - id: i5
        label: Ethernet1/0
        slot: 4
        type: physical
      - id: i6
        label: Ethernet1/1
        slot: 5
        type: physical
      - id: i7
        label: Ethernet1/2
        slot: 6
        type: physical
      - id: i8
        label: Ethernet1/3
        slot: 7
        type: physical
      - id: i9
        label: Ethernet2/0
        slot: 8
        type: physical
      - id: i10
        label: Ethernet2/1
        slot: 9
        type: physical
      - id: i11
        label: Ethernet2/2
        slot: 10
        type: physical
      - id: i12
        label: Ethernet2/3
        slot: 11
        type: physical
      - id: i13
        label: Ethernet3/0
        slot: 12
        type: physical
      - id: i14
        label: Ethernet3/1
        slot: 13
        type: physical
  - boot_disk_size: null
    configuration: ums-0b8e167b-54
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n11
    image_definition: null
    label: SW-MPLS
    node_definition: unmanaged_switch
    ram: null
    tags: []
    x: 80
    y: 440
    interfaces:
      - id: i0
        label: port0
        slot: 0
        type: physical
      - id: i1
        label: port1
        slot: 1
        type: physical
      - id: i2
        label: port2
        slot: 2
        type: physical
      - id: i3
        label: port3
        slot: 3
        type: physical
      - id: i4
        label: port4
        slot: 4
        type: physical
      - id: i5
        label: port5
        slot: 5
        type: physical
      - id: i6
        label: port6
        slot: 6
        type: physical
      - id: i7
        label: port7
        slot: 7
        type: physical
      - id: i8
        label: port8
        slot: 8
        type: physical
      - id: i9
        label: port9
        slot: 9
        type: physical
      - id: i10
        label: port10
        slot: 10
        type: physical
      - id: i11
        label: port11
        slot: 11
        type: physical
      - id: i12
        label: port12
        slot: 12
        type: physical
      - id: i13
        label: port13
        slot: 13
        type: physical
      - id: i14
        label: port14
        slot: 14
        type: physical
      - id: i15
        label: port15
        slot: 15
        type: physical
      - id: i16
        label: port16
        slot: 16
        type: physical
      - id: i17
        label: port17
        slot: 17
        type: physical
      - id: i18
        label: port18
        slot: 18
        type: physical
      - id: i19
        label: port19
        slot: 19
        type: physical
      - id: i20
        label: port20
        slot: 20
        type: physical
      - id: i21
        label: port21
        slot: 21
        type: physical
      - id: i22
        label: port22
        slot: 22
        type: physical
      - id: i23
        label: port23
        slot: 23
        type: physical
      - id: i24
        label: port24
        slot: 24
        type: physical
      - id: i25
        label: port25
        slot: 25
        type: physical
      - id: i26
        label: port26
        slot: 26
        type: physical
      - id: i27
        label: port27
        slot: 27
        type: physical
      - id: i28
        label: port28
        slot: 28
        type: physical
      - id: i29
        label: port29
        slot: 29
        type: physical
      - id: i30
        label: port30
        slot: 30
        type: physical
      - id: i31
        label: port31
        slot: 31
        type: physical
  - boot_disk_size: null
    configuration: ums-0b8e167b-54
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n10
    image_definition: null
    label: SW-INET
    node_definition: unmanaged_switch
    ram: null
    tags: []
    x: -440
    y: 440
    interfaces:
      - id: i0
        label: port0
        slot: 0
        type: physical
      - id: i1
        label: port1
        slot: 1
        type: physical
      - id: i2
        label: port2
        slot: 2
        type: physical
      - id: i3
        label: port3
        slot: 3
        type: physical
      - id: i4
        label: port4
        slot: 4
        type: physical
      - id: i5
        label: port5
        slot: 5
        type: physical
      - id: i6
        label: port6
        slot: 6
        type: physical
      - id: i7
        label: port7
        slot: 7
        type: physical
      - id: i8
        label: port8
        slot: 8
        type: physical
      - id: i9
        label: port9
        slot: 9
        type: physical
      - id: i10
        label: port10
        slot: 10
        type: physical
      - id: i11
        label: port11
        slot: 11
        type: physical
      - id: i12
        label: port12
        slot: 12
        type: physical
      - id: i13
        label: port13
        slot: 13
        type: physical
      - id: i14
        label: port14
        slot: 14
        type: physical
      - id: i15
        label: port15
        slot: 15
        type: physical
      - id: i16
        label: port16
        slot: 16
        type: physical
      - id: i17
        label: port17
        slot: 17
        type: physical
      - id: i18
        label: port18
        slot: 18
        type: physical
      - id: i19
        label: port19
        slot: 19
        type: physical
      - id: i20
        label: port20
        slot: 20
        type: physical
      - id: i21
        label: port21
        slot: 21
        type: physical
      - id: i22
        label: port22
        slot: 22
        type: physical
      - id: i23
        label: port23
        slot: 23
        type: physical
      - id: i24
        label: port24
        slot: 24
        type: physical
      - id: i25
        label: port25
        slot: 25
        type: physical
      - id: i26
        label: port26
        slot: 26
        type: physical
      - id: i27
        label: port27
        slot: 27
        type: physical
      - id: i28
        label: port28
        slot: 28
        type: physical
      - id: i29
        label: port29
        slot: 29
        type: physical
      - id: i30
        label: port30
        slot: 30
        type: physical
      - id: i31
        label: port31
        slot: 31
        type: physical
links:
  - id: l0
    n1: n0
    n2: n3
    i1: i1
    i2: i0
    conditioning: {}
    label: Manager0{{ manager_num }}-eth1<->SW1-port0
  - id: l1
    n1: n2
    n2: n3
    i1: i1
    i2: i2
    conditioning: {}
    label: Validator{{ validator_num }}-ge0/0<->SW1-port2
  - id: l2
    n1: n5
    n2: n0
    i1: i0
    i2: i0
    conditioning: {}
    label: External-port<->Manager0{{ manager_num }}-eth0
  - id: l3
    n1: n1
    n2: n3
    i1: i1
    i2: i1
    conditioning: {}
    label: Controller{{ controller_num }}-eth1<->SW1-port1
  - id: l4
    n1: n4
    n2: n6
    i1: i32
    i2: i0
    conditioning: {}
    label: Gateway-Ethernet7/3<->Internet-port
  - id: l5
    n1: n4
    n2: n3
    i1: i1
    i2: i3
    conditioning: {}
    label: Gateway-Ethernet0/0<->SW1-port3
  - id: l6
    n1: n4
    n2: n7
    i1: i2
    i2: i0
    conditioning: {}
    label: Gateway-Ethernet0/1<->SW2-port1
  - id: l7
    n1: n8
    n2: n7
    i1: i1
    i2: i1
    conditioning: {}
    label: INET-Ethernet0/0<->SW2-port2
  - id: l8
    n1: n9
    n2: n7
    i1: i1
    i2: i2
    conditioning: {}
    label: MPLS-Ethernet0/0<->SW2-port3
  - id: l9
    n1: n8
    n2: n10
    i1: i2
    i2: i0
    conditioning: {}
    label: INET-Ethernet0/0<->SW-INET-port3
  - id: l10
    n1: n9
    n2: n11
    i1: i2
    i2: i0
    conditioning: {}
    label: INET-Ethernet0/0<->SW-INET-port3
lab:
  description: This lab was deployed using SD-WAN lab automation.
  notes: |-
    -- Do not delete this text --
    manager_external_ip = {{ manager_external_ip }}:{{ manager_port }}
    -- Do not delete this text --
  title: '{{ title }}'
  version: 0.2.1
